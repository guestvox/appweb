"use strict";$(document).ready(function(){var b;var a=false;$('[data-modal="new_menu"]').modal().onCancel(function(){b=null;a=false;$('[data-modal="new_menu"]').removeClass("edit");$('[data-modal="new_menu"]').addClass("new");$('[data-modal="new_menu"]').find("header > h3").html("Nuevo");$('[data-modal="new_menu"]').find("form")[0].reset();$('[data-modal="new_menu"]').find("label.error").removeClass("error");$('[data-modal="new_menu"]').find("p.error").remove()});$('[data-modal="new_menu"]').modal().onSuccess(function(){$('[data-modal="new_menu"]').find("form").submit()});$('form[name="new_menu"]').on("submit",function(f){f.preventDefault();var c=$(this);if(a==false){var d="&action=new_menu"}else{if(a==true){var d="&id="+b+"&action=edit_menu"}}$.ajax({type:"POST",data:c.serialize()+d,processData:false,cache:false,dataType:"json",success:function(e){if(e.status=="success"){$('[data-modal="success"]').addClass("view");$('[data-modal="success"]').find("main > p").html(e.message);setTimeout(function(){location.reload()},1500)}else{if(e.status=="error"){if(e.labels){c.find("label.error").removeClass("error");c.find("p.error").remove();$.each(e.labels,function(h,g){if(g[1].length>0){c.find('[name="'+g[0]+'"]').parents("label").addClass("error").append('<p class="error">'+g[1]+"</p>")}else{c.find('[name="'+g[0]+'"]').parents("label").addClass("error")}});c.find("label.error [name]")[0].focus()}else{if(e.message){$('[data-modal="error"]').addClass("view");$('[data-modal="error"]').find("main > p").html(e.message)}}}}}})})});